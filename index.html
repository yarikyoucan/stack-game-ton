<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Stack Game</title>
  <style>
    /* --- –ë–ê–ó–ê --- */
    body{margin:0;font-family:Arial,sans-serif;background:#0f172a;display:flex;flex-direction:column;height:100vh;padding-bottom:64px}
    .page{flex:1;display:none;overflow:auto;padding:10px}.page.active{display:block}

    /* –ù–ò–ñ–ù–Ñ –ú–ï–ù–Æ: —Ç–µ–º–Ω–æ-—Å–∏–Ω—î –Ω–∞–ø—ñ–≤–ø—Ä–æ–∑–æ—Ä–µ */
    .menu{
      display:flex;justify-content:space-around;
      border-top:1px solid rgba(255,255,255,.15);
      background:rgba(15,23,42,.75);
      padding:10px 0;position:fixed;left:0;right:0;bottom:0;z-index:9999
    }
    .menu button{flex:1;background:none;border:none;font-size:22px;cursor:pointer;color:#fff}
    .menu button.active{color:#3b82f6;font-weight:bold}

    /* --- –ì–†–ê: –Ω—ñ—á–Ω–∏–π —Ñ–æ–Ω –∑ –±—É–¥–∏–Ω–∫–∞–º–∏ –ø—ñ–¥ –ø—Ä–æ–∑–æ—Ä–∏–º canvas --- */
    #container{
      position:relative;width:100%;height:100%;overflow:hidden;
      background:
        url('data:image/svg+xml;utf8,\
<svg xmlns="http://www.w3.org/2000/svg" width="800" height="220" viewBox="0 0 800 220">\
<rect width="800" height="220" fill="none"/>\
<path d="M0 190 L20 170 L45 172 L45 190 L70 160 L95 162 L95 190 L130 150 L160 152 L160 190 L200 165 L230 167 L230 190 L270 155 L310 157 L310 190 L350 170 L380 172 L380 190 L420 160 L455 162 L455 190 L495 168 L530 170 L530 190 L570 156 L610 158 L610 190 L650 170 L690 172 L690 190 L730 160 L770 165 L770 190 L800 150 L800 220 L0 220 Z" fill="%23040a1c"/>\
<path d="M0 200 L30 180 L50 180 L50 200 L80 155 L110 155 L110 200 L150 140 L180 140 L180 200 L220 165 L250 165 L250 200 L300 145 L340 145 L340 200 L380 175 L420 175 L420 200 L460 150 L500 150 L500 200 –õ540 165 L580 165 L580 200 L620 145 L660 145 L660 200 L700 175 L740 175 L740 200 L800 160 L800 220 L0 220 Z" fill="%23000a1a"/>\
<g fill="%23ffd34d">\
<rect x="60" y="170" width="6" height="10"/><rect x="66" y="170" width="6" height="10" opacity="0.6"/>\
<rect x="206" y="176" width="6" height="10"/><rect x="214" y="176" width="6" height="10" opacity="0.6"/>\
<rect x="362" y="182" width="6" height="10"/><rect x="370" y="182" width="6" height="10" opacity="0.6"/>\
<rect x="526" y="178" width="6" height="10"/><rect x="534" y="178" width="6" height="10" opacity="0.6"/>\
<rect x="686" y="182" width="6" height="10"/><rect x="694" y="182" width="6" height="10" opacity="0.6"/>\
</g></svg>') bottom repeat-x,
        radial-gradient(1000px 520px at 20% -10%, rgba(99,102,241,.35), transparent 60%),
        radial-gradient(900px 600px at 85% 110%, rgba(56,189,248,.25), transparent 60%),
        linear-gradient(180deg,#1e1b4b 0%, #0b1020 60%, #090f1a 100%);
      background-size:auto 220px, auto, auto, cover;
      background-position:bottom, center, center, center;
    }
    #container canvas{
      position:absolute!important;top:0;left:0;width:100%!important;height:100%!important;z-index:1!important;
      background:transparent!important;
    }

    /* –ü–µ—Ä–µ–º–∏–∫–∞—á –º–æ–≤–∏ —É –≥—Ä—ñ */
    .lang-btn{
      position:absolute;top:10px;right:10px;z-index:3;
      background:rgba(255,255,255,.12); color:#eaf2ff; border:1px solid rgba(255,255,255,.25);
      padding:6px 10px; border-radius:10px; font-weight:800; letter-spacing:.5px; cursor:pointer;
      backdrop-filter: blur(6px);
    }
    .lang-btn:hover{filter:brightness(1.05)}

    #scoreboard{position:absolute;top:10px;left:10px;display:flex;gap:10px;z-index:2}
    #score,#highscore{background:rgba(0,0,0,.5);color:#fff;padding:5px 10px;border-radius:6px}
    #instructions{position:absolute;top:50px;left:10px;color:#fff;font-size:16px;background:rgba(0,0,0,.4);padding:4px 8px;border-radius:6px;z-index:2}
    .hide{display:none}
    .game-over,.ready{
      position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
      text-align:center;background:rgba(15,23,42,.95);color:#fff;
      padding:20px;border-radius:10px;display:none;z-index:3;min-width:260px;
      box-shadow:0 2px 5px rgba(0,0,0,.4)
    }

    /* --- –ó–ê–í–î–ê–ù–ù–Ø & –ì–ê–ú–ê–ù–ï–¶–¨: –∑–∞—Ç–≤–µ—Ä–¥–∂–µ–Ω–∞ –Ω–µ–æ–Ω-—Ç–µ–º–∞ --- */
    .themed{
      position:relative;color:#eef;padding-bottom:84px;
      background:
        radial-gradient(1200px 500px at 15% 0%, rgba(99,102,241,.35), transparent 60%),
        radial-gradient(1000px 600px at 85% 100%, rgba(56,189,248,.25), transparent 60%),
        linear-gradient(135deg,#0f172a 0%, #1e1b4b 45%, #3b82f6 100%);
    }
    /* –±—ñ–ª—å—à–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ "–ó–∞–≤–¥–∞–Ω–Ω—è" */
    #tasksTitle{color:#eaf2ff;margin:6px 0 8px 14px;font-size:28px}

    #tasks.themed{
      background-image:
        radial-gradient(1200px 500px at 15% 0%, rgba(99,102,241,.35), transparent 60%),
        radial-gradient(1000px 600px at 85% 100%, rgba(56,189,248,.25), transparent 60%),
        linear-gradient(135deg,#0f172a 0%, #1e1b4b 45%, #3b82f6 100%),
        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="620" height="180" viewBox="0 0 620 180"><g fill="%23ffffff1f" font-family="Arial, Helvetica, sans-serif" font-size="28" font-weight="800" transform="rotate(-18 310 90)"><text x="-60" y="40">TASKS ‚Ä¢ TASKS ‚Ä¢ TASKS ‚Ä¢ TASKS ‚Ä¢ TASKS ‚Ä¢</text><text x="-60" y="100">TASKS ‚Ä¢ TASKS ‚Ä¢ TASKS ‚Ä¢ TASKS ‚Ä¢ TASKS ‚Ä¢</text><text x="-60" y="160">TASKS ‚Ä¢ TASKS ‚Ä¢ TASKS ‚Ä¢ TASKS ‚Ä¢ TASKS ‚Ä¢</text></g></svg>');
      background-size:auto,auto,auto,620px 180px; background-repeat:no-repeat,no-repeat,no-repeat,repeat;
    }
    #friends.themed{
      background-image:
        radial-gradient(1200px 500px at 15% 0%, rgba(99,102,241,.35), transparent 60%),
        radial-gradient(1000px 600px at 85% 100%, rgba(56,189,248,.25), transparent 60%),
        linear-gradient(135deg,#0f172a 0%, #1e1b4b 45%, #3b82f6 100%),
        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="640" height="180" viewBox="0 0 640 180"><g fill="%23ffffff1f" font-family="Arial, Helvetica, sans-serif" font-size="28" font-weight="800" transform="rotate(-18 320 90)"><text x="-60" y="40">WALLET ‚Ä¢ WALLET ‚Ä¢ WALLET ‚Ä¢ WALLET ‚Ä¢ WALLET ‚Ä¢</text><text x="-60" y="100">WALLET ‚Ä¢ WALLET ‚Ä¢ WALLET ‚Ä¢ WALLET ‚Ä¢ WALLET ‚Ä¢</text><text x="-60" y="160">WALLET ‚Ä¢ WALLET ‚Ä¢ WALLET ‚Ä¢ WALLET ‚Ä¢ WALLET ‚Ä¢</text></g></svg>');
      background-size:auto,auto,auto,640px 180px; background-repeat:no-repeat,no-repeat,no-repeat,repeat;
    }
    .themed .task,.themed .share-card{width:90%;margin:12px auto;background:rgba(255,255,255,.06);border-radius:10px;border:1px solid rgba(255,255,255,.15);padding:16px;backdrop-filter:blur(6px);box-shadow:0 10px 30px rgba(0,0,0,.15)}
    .themed .btn{background:#3b82f6;color:#fff;border:none;padding:8px 12px;border-radius:6px;cursor:pointer}
    .themed .btn:hover{filter:brightness(1.05)}
    .themed .muted{color:#c7d2fe}
    .task button.done{background:#28a745}

    .share-row{display:flex;gap:8px;margin-top:8px}
    .share-row input{flex:1;padding:8px 10px;border:1px solid #ddd;border-radius:8px;font-size:14px}
    .share-actions{display:flex;gap:8px;margin-top:8px;align-items:center;flex-wrap:wrap}
    .muted{font-size:12px}

    /* –ë–∞–ª–∞–Ω—Å –ø–æ —Ü–µ–Ω—Ç—Ä—É, –±—ñ–ª—å—à–∏–π; –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≥–∞–º–∞–Ω—Ü—è –±—ñ–ª—å—à–∏–π */
    #friends .balance{font-size:28px;font-weight:800;text-align:center;margin:16px 0;color:#eaf2ff}
    #friends h2.wallet-title{color:#eaf2ff;text-align:center;font-size:26px;margin:0 0 20px}

    /* --- BATTLES: –ø–µ—Ä—à–∏–π —Ä–µ–¥–∏–∑–∞–π–Ω + –ø–æ–≤–Ω–æ–µ–∫—Ä–∞–Ω–Ω–∏–π –ø–∞—Ç–µ—Ä–Ω "BATTLES" --- */
    #tournaments{
      position:relative;color:#eef;padding-bottom:84px;
      background-image:
        radial-gradient(1200px 500px at 15% 0%, rgba(99,102,241,.35), transparent 60%),
        radial-gradient(1000px 600px at 85% 100%, rgba(56,189,248,.25), transparent 60%),
        linear-gradient(135deg,#0f172a 0%, #1e1b4b 45%, #3b82f6 100%),
        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="760" height="200" viewBox="0 0 760 200"><g fill="%23ffffff15" font-family="Arial, Helvetica, sans-serif" font-size="36" font-weight="800" transform="rotate(-18 380 100)"><text x="-60" y="40">BATTLES ‚Ä¢ BATTLES ‚Ä¢ BATTLES ‚Ä¢ BATTLES ‚Ä¢ BATTLES ‚Ä¢</text><text x="-60" y="100">BATTLES ‚Ä¢ BATTLES ‚Ä¢ BATTLES ‚Ä¢ BATTLES ‚Ä¢ BATTLES ‚Ä¢</text><text x="-60" y="160">BATTLES ‚Ä¢ BATTLES ‚Ä¢ BATTLES ‚Ä¢ BATTLES ‚Ä¢ BATTLES ‚Ä¢</text></g></svg>');
      background-size:auto,auto,auto,760px 200px; background-repeat:no-repeat,no-repeat,no-repeat,repeat;
    }
    #tournaments .tour-hero{
      width:90%;margin:12px auto;padding:16px;border-radius:14px;color:#fff;
      background:linear-gradient(135deg, rgba(99,102,241,.9), rgba(90,200,250,.9));
      box-shadow:0 10px 30px rgba(0,0,0,.15);
    }
    .tour-hero-title{font-size:20px;font-weight:700}
    .tour-hero-sub{opacity:.95;margin-top:4px}

    #tournaments .challenge-card{
      width:90%;margin:12px auto;background:rgba(255,255,255,.06);border-radius:12px;
      border:1px solid rgba(255,255,255,.15);padding:14px;color:#eef;backdrop-filter:blur(6px);
      box-shadow:0 10px 30px rgba(0,0,0,.15);
    }
    #tournaments .challenge-row{display:flex;justify-content:space-between;align-items:center;gap:10px;margin:10px 0}
    #tournaments .opponent-score{font-weight:700;font-size:20px}
    #tournaments #stakeInput{flex:0 0 110px;padding:8px 10px;border:1px solid #ddd;border-radius:8px;font-size:14px}
    #tournaments .stake-wrap{display:flex;gap:8px;align-items:center;flex:1}
    #tournaments .challenge-countdown{margin-top:6px;font-weight:600}
    #tournaments .challenge-actions{display:flex;align-items:center;gap:8px;margin-top:10px}
    #tournaments .btn{background:#3b82f6;color:#fff;border:none;padding:8px 12px;border-radius:6px;cursor:pointer}
    #tournaments .btn:hover{filter:brightness(1.05)}
    #tournaments .muted{color:#c7d2fe}

    /* –Ñ–î–ò–ù–ò–ô –Ω–∏–∂–Ω—ñ–π —ñ–Ω—Ñ–æ-–±–∞–Ω–µ—Ä */
    .battle-panel{
      width:92%; margin:14px auto 96px;
      border-radius:16px; overflow:hidden;
      background:
        linear-gradient(135deg, rgba(30,27,75,.85), rgba(37,99,235,.85)),
        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="280" height="280" viewBox="0 0 280 280"><g fill="none" stroke="%23ffffff22"><path d="M0 40h280M0 80h280M0 120h280M0 160h280M0 200h280M0 240h280"/><path d="M40 0v280M80 0v280M120 0v280M160 0v280M200 0v280M240 0v280"/></g></svg>') center/280px repeat;
      border:1px solid rgba(255,255,255,.18);
      color:#eaf2ff; box-shadow:0 10px 30px rgba(0,0,0,.2);
    }
    .battle-panel .inner{display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:space-between;padding:14px 16px}
    .battle-panel .title{display:flex;align-items:center;gap:10px;font-weight:800;letter-spacing:.5px;text-transform:uppercase}
    .battle-panel .title .logo{width:38px;height:38px;border-radius:12px;background:radial-gradient(circle at 30% 30%, #93c5fd, #6366f1);box-shadow:inset 0 1px 0 rgba(255,255,255,.35), 0 6px 16px rgba(99,102,241,.35);display:grid;place-items:center;font-size:20px}
    .battle-panel .rules{display:flex;gap:10px;flex:1;min-width:220px;justify-content:center;flex-wrap:wrap}
    .battle-panel .pill{background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.18);padding:6px 10px;border-radius:999px;font-weight:700;font-size:13px}
    .battle-panel .cta{display:flex;gap:8px;align-items:center}
    .battle-panel .cta .btn{padding:10px 12px;border-radius:10px}
  </style>
</head>
<body>

  <!-- GAME -->
  <div id="game" class="page active">
    <div id="container">
      <button id="langToggle" class="lang-btn">UA</button>

      <div id="scoreboard">
        <div id="score">0</div>
        <div id="highscore">üèÜ 0</div>
      </div>
      <div id="instructions" data-i18n="instructions">–ö–ª—ñ–∫ –∞–±–æ –ø—Ä–æ–±—ñ–ª ‚Äî –ø–æ—Å—Ç–∞–≤–∏—Ç–∏ –±–ª–æ–∫. –ü—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è ‚Äî –∫–ª—ñ–∫–Ω–∏/–ø—Ä–æ–±—ñ–ª, —â–æ–± –∑—ñ–≥—Ä–∞—Ç–∏ —â–µ.</div>

      <div class="game-over" id="gameOver">
        <h2 data-i18n="game_over">–ì—Ä–∞ –∑–∞–∫—ñ–Ω—á–µ–Ω–∞</h2>
        <p data-i18n="nice_try">–¢–∏ –º–æ–ª–æ–¥–µ—Ü—å üëç</p>
        <p data-i18n="restart_hint">–ö–ª—ñ–∫–Ω–∏ –∞–±–æ –Ω–∞—Ç–∏—Å–Ω–∏ –ø—Ä–æ–±—ñ–ª, —â–æ–± –ø–æ—á–∞—Ç–∏ –∑–Ω–æ–≤—É</p>
      </div>

      <div class="ready" id="ready">
        <div id="start-button" style="cursor:pointer;" data-i18n="start_btn">‚ñ∂ –°—Ç–∞—Ä—Ç</div>
      </div>

      <!-- 15-—Å —Ç–∞–π–º–µ—Ä –ø—ñ—Å–ª—è —Ä–µ–∫–ª–∞–º–∏ –ø–æ Game Over -->
      <div class="game-over" id="postAdTimer" style="display:none;">
        <h2 data-i18n="pause_before_new_game">–ü–∞—É–∑–∞ –ø–µ—Ä–µ–¥ –Ω–æ–≤–æ—é –≥—Ä–æ—é</h2>
        <p><span data-i18n="you_can_start_in">–ú–æ–∂–Ω–∞ –±—É–¥–µ –ø–æ—á–∞—Ç–∏ —á–µ—Ä–µ–∑:</span> <b id="postAdCountdown">15</b> <span data-i18n="sec_suffix">—Å</span></p>
      </div>
    </div>
  </div>

  <!-- TASKS -->
  <div id="tasks" class="page themed">
    <h2 id="tasksTitle">üìã <span data-i18n="tasks_title">–ó–∞–≤–¥–∞–Ω–Ω—è</span></h2>

    <div class="task">
      <span data-i18n="task_subscribe_text">–ü—ñ–¥–ø–∏—à–∏—Å—å –Ω–∞ –∫–∞–Ω–∞–ª +1‚≠ê</span>
      <button id="subscribeBtn" class="btn" data-i18n="open">–ü–µ—Ä–µ–π—Ç–∏</button>
    </div>

    <div class="task" id="task50" style="justify-content:space-between;">
      <span data-i18n="task_75_text">üéØ –î–æ—Å—è–≥–Ω–∏ —Ä–µ–∫–æ—Ä–¥—É 75 (+10‚≠ê)</span>
      <button id="checkTask50" class="btn" style="margin-left:auto;" data-i18n="check">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button>
    </div>

    <div class="task" id="taskAdOncePerMinute">
      <span data-i18n="task_ad_minute_text">üé¨ –ü–µ—Ä–µ–≥–ª—è–Ω—å —Ä–µ–∫–ª–∞–º—É +0.15‚≠ê <small>(—Ä–∞–∑ –Ω–∞ 1 —Ö–≤)</small></span>
      <button id="watchAdMinuteBtn" class="btn" data-i18n="watch">–î–∏–≤–∏—Ç–∏—Å—å</button>
    </div>
    <div class="task" id="taskAdStatus" style="display:none;">
      <span><span data-i18n="next_available_in">‚åõ –ù–∞—Å—Ç—É–ø–Ω–∏–π –ø–µ—Ä–µ–≥–ª—è–¥ –¥–æ—Å—Ç—É–ø–Ω–∏–π —á–µ—Ä–µ–∑:</span> <span id="adCooldownText">60—Å</span></span>
      <button class="btn" disabled data-i18n="wait">–û—á—ñ–∫—É–π‚Ä¶</button>
    </div>

    <div class="task" id="taskWatch5">
      <span><span data-i18n="task_5ads_text">üé¨ –ü–µ—Ä–µ–≥–ª—è–Ω—å 5 —Ä–µ–∫–ª–∞–º (+1‚≠ê)</span> ‚Äî <b id="ad5Counter">0/5</b></span>
      <button id="watchAd5Btn" class="btn" data-i18n="watch">–î–∏–≤–∏—Ç–∏—Å—è</button>
    </div>
    <div class="task" id="taskWatch5Cooldown" style="display:none;">
      <span>‚åõ <span data-i18n="task_5ads_available_in">¬´5 —Ä–µ–∫–ª–∞–º¬ª –¥–æ—Å—Ç—É–ø–Ω–µ —á–µ—Ä–µ–∑:</span> <span id="ad5CooldownText">‚Äî</span></span>
      <button class="btn" disabled data-i18n="wait">–û—á—ñ–∫—É–π‚Ä¶</button>
    </div>

    <div class="task" id="taskWatch10">
      <span><span data-i18n="task_10ads_text">üé¨ –ü–µ—Ä–µ–≥–ª—è–Ω—å 10 —Ä–µ–∫–ª–∞–º (+2‚≠ê)</span> ‚Äî <b id="ad10Counter">0/10</b></span>
      <button id="watchAd10Btn" class="btn" data-i18n="watch">–î–∏–≤–∏—Ç–∏—Å—è</button>
    </div>
    <div class="task" id="taskWatch10Cooldown" style="display:none;">
      <span>‚åõ <span data-i18n="task_10ads_available_in">¬´10 —Ä–µ–∫–ª–∞–º¬ª –¥–æ—Å—Ç—É–ø–Ω–µ —á–µ—Ä–µ–∑:</span> <span id="ad10CooldownText">‚Äî</span></span>
      <button class="btn" disabled data-i18n="wait">–û—á—ñ–∫—É–π‚Ä¶</button>
    </div>

    <div class="task" id="taskGames100" style="justify-content:space-between;">
      <span data-i18n="task_100games_text">üéÆ –ó—ñ–≥—Ä–∞–π 100 —ñ–≥–æ—Ä (+10‚≠ê) ‚Äî –∑—ñ–≥—Ä–∞–Ω–æ: <b id="gamesPlayedCounter">0</b>/100</span>
      <button id="checkGames100Btn" class="btn" style="margin-left:auto;" data-i18n="check">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button>
    </div>
  </div>

  <!-- TOURNAMENTS -->
  <div id="tournaments" class="page">
    <div class="tour-hero">
      <div class="tour-hero-title" data-i18n="b_tour_title">‚öîÔ∏è –í–∏–∫–ª–∏–∫ —Å—É–ø–µ—Ä–Ω–∏–∫–∞</div>
      <div class="tour-hero-sub" data-i18n="b_tour_sub">–ó–≥–µ–Ω–µ—Ä—É–π —Ä–µ–∫–æ—Ä–¥, –∑—Ä–æ–±–∏ —Å—Ç–∞–≤–∫—É ‚≠ê —ñ –ø–æ–±–∏–π –π–æ–≥–æ –∑–∞ 3 –≥–æ–¥–∏–Ω–∏</div>
    </div>

    <div class="challenge-card">
      <div class="challenge-row">
        <div>
          <div class="muted" data-i18n="opponent">–°—É–ø–µ—Ä–Ω–∏–∫</div>
          <div class="opponent-score" id="opponentScore">‚Äî</div>
        </div>
        <button class="btn" id="genOpponentBtn" data-i18n="generate">–ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏</button>
      </div>

      <div class="challenge-row">
        <label for="stakeInput" class="muted" data-i18n="stake">–°—Ç–∞–≤–∫–∞ ‚≠ê</label>
        <div class="stake-wrap">
          <input id="stakeInput" type="number" min="1" step="0.5" value="1" />
          <button class="btn" id="startChallengeBtn" data-i18n="start_challenge">–ü–æ—á–∞—Ç–∏ –≤–∏–∫–ª–∏–∫ (3 –≥–æ–¥)</button>
        </div>
      </div>

      <div class="challenge-info" id="challengeInfo" data-i18n="no_active_challenge">–ù–µ–º–∞—î –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≤–∏–∫–ª–∏–∫—É.</div>

      <div class="challenge-countdown" id="challengeCountdown" style="display:none;">
        ‚è≥ <span data-i18n="time_left_prefix">–ó–∞–ª–∏—à–∏–ª–æ—Å—å:</span> <span id="challengeLeft">03:00:00</span>
      </div>

      <div class="challenge-actions">
        <button class="btn" id="checkChallengeBtn" disabled data-i18n="check">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button>
        <span id="challengeStatus" class="muted"></span>
      </div>
    </div>

    <!-- –Ñ–î–ò–ù–ò–ô –Ω–∏–∂–Ω—ñ–π —ñ–Ω—Ñ–æ-–±–∞–Ω–µ—Ä -->
    <div class="battle-panel" aria-label="–ü—Ä–∞–≤–∏–ª–∞ –±–∞—Ç–ª—É">
      <div class="inner">
        <div class="title">
          <div class="logo">‚öîÔ∏è</div>
          <div>BATTLES</div>
        </div>
        <div class="rules">
          <div class="pill" data-i18n="rule_goal">üéØ –ú–µ—Ç–∞: –ø–æ–±–∏–π —Ä–µ–∫–æ—Ä–¥ –∑–∞ 3 –≥–æ–¥</div>
          <div class="pill" data-i18n="rule_prize">üíé –í–∏–≥—Ä–∞—à: √ó1.5 –≤—ñ–¥ —Å—Ç–∞–≤–∫–∏</div>
          <div class="pill" data-i18n="rule_risk">‚ö†Ô∏è –Ø–∫—â–æ –Ω–µ –≤—Å—Ç–∏–≥–∞—î—à ‚Äî —Å—Ç–∞–≤–∫–∞ –∑–≥–æ—Ä–∞—î</div>
        </div>
        <div class="cta">
          <button class="btn" onclick="document.getElementById('stakeInput').focus()" data-i18n="make_bet">–ó—Ä–æ–±–∏—Ç–∏ —Å—Ç–∞–≤–∫—É</button>
        </div>
      </div>
    </div>
  </div>

  <!-- FRIENDS -->
  <div id="friends" class="page themed">
    <div class="balance"> <span data-i18n="balance">–ë–∞–ª–∞–Ω—Å</span> ‚≠ê <span id="balance">0</span></div>
    <h2 class="wallet-title">üí≥ <span data-i18n="wallet">–ì–∞–º–∞–Ω–µ—Ü—å</span></h2>

    <div class="share-card">
      <div><strong data-i18n="invite_friends">–ó–∞–ø—Ä–æ—Å–∏ –¥—Ä—É–∑—ñ–≤</strong></div>
      <p class="muted" data-i18n="bot_link">–ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –±–æ—Ç–∞:</p>
      <p style="margin:8px 0;">
        <a href="https://t.me/Stacktongame_bot" class="btn" onclick="openBotLink(event)" data-i18n="open_bot">
          ‚û° –í—ñ–¥–∫—Ä–∏—Ç–∏ –±–æ—Ç–∞ @Stacktongame_bot
        </a>
      </p>
      <div class="share-row">
        <input id="shareLink" type="text" readonly value="https://t.me/Stacktongame_bot"/>
        <button class="btn" id="copyShareBtn" data-i18n="copy">–°–∫–æ–ø—ñ—é–≤–∞—Ç–∏</button>
      </div>
      <div class="muted" data-i18n="one_link">–¶–µ –æ–¥–Ω–∞ —Å–∏–ª–∫–∞ –¥–ª—è –≤—Å—ñ—Ö üëç</div>
    </div>

    <div class="share-card">
      <div><strong data-i18n="withdraw_title">–í–∏–≤—ñ–¥ –∑—ñ—Ä–æ–∫</strong></div>
      <div class="muted" data-i18n="withdraw_hint">–ó–∞ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è —Å–ø–∏—Å—É—î—Ç—å—Å—è —Ä—ñ–≤–Ω–æ 50‚≠ê, —Ä–µ—à—Ç–∞ –ª–∏—à–∞—î—Ç—å—Å—è. –î–∞–ª—ñ –≤—ñ–¥–∫—Ä–∏—î—Ç—å—Å—è –≥—Ä—É–ø–∞/¬´–ü–æ–¥—ñ–ª–∏—Ç–∏—Å—è¬ª –∑ –≥–æ—Ç–æ–≤–∏–º –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º —ñ –¥–≤–æ–º–∞ –∫–æ–¥–∞–º–∏.</div>
      <div class="share-actions">
        <button class="btn" id="withdrawBtn" data-i18n="withdraw_btn">–í–∏–≤–µ—Å—Ç–∏</button>
        <span id="withdrawStatus" class="muted"></span>
      </div>
    </div>

    <div class="share-card">
      <div><strong data-i18n="payout_list_title">–°–ø–∏—Å–æ–∫ –≤–∏–≤–æ–¥—ñ–≤</strong></div>
      <ul id="payoutList" class="payout-list"></ul>
    </div>
  </div>

  <!-- BOTTOM MENU -->
  <div class="menu">
    <button onclick="showPage('game', this)" class="active">üéÆ</button>
    <button onclick="showPage('tasks', this)">üìù</button>
    <button onclick="showPage('tournaments', this)">‚öîÔ∏è</button>
    <button onclick="showPage('friends', this)">üëõ</button>
  </div>

  <!-- Libs -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r83/three.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/TweenMax.min.js"></script>
  <script src="https://sad.adsgram.ai/js/sad.min.js"></script>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- App helpers -->
  <script>
    function showPage(id, btn){
      document.querySelectorAll('.page').forEach(p => p.classList.toggle('active', p.id===id));
      document.querySelectorAll('.menu button').forEach(b => b.classList.toggle('active', b===btn));
    }
    function openBotLink(e){
      if (window.Telegram && Telegram.WebApp) {
        Telegram.WebApp.openTelegramLink('https://t.me/Stacktongame_bot');
        e.preventDefault();
      }
    }

    /* ======= –ü—Ä–æ—Å—Ç–∏–π i18n: UA/EN ======= */
    const I18N = {
      uk: {
        instructions: "–ö–ª—ñ–∫ –∞–±–æ –ø—Ä–æ–±—ñ–ª ‚Äî –ø–æ—Å—Ç–∞–≤–∏—Ç–∏ –±–ª–æ–∫. –ü—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è ‚Äî –∫–ª—ñ–∫–Ω–∏/–ø—Ä–æ–±—ñ–ª, —â–æ–± –∑—ñ–≥—Ä–∞—Ç–∏ —â–µ.",
        game_over: "–ì—Ä–∞ –∑–∞–∫—ñ–Ω—á–µ–Ω–∞",
        nice_try: "–¢–∏ –º–æ–ª–æ–¥–µ—Ü—å üëç",
        restart_hint: "–ö–ª—ñ–∫–Ω–∏ –∞–±–æ –Ω–∞—Ç–∏—Å–Ω–∏ –ø—Ä–æ–±—ñ–ª, —â–æ–± –ø–æ—á–∞—Ç–∏ –∑–Ω–æ–≤—É",
        start_btn: "‚ñ∂ –°—Ç–∞—Ä—Ç",
        pause_before_new_game: "–ü–∞—É–∑–∞ –ø–µ—Ä–µ–¥ –Ω–æ–≤–æ—é –≥—Ä–æ—é",
        you_can_start_in: "–ú–æ–∂–Ω–∞ –±—É–¥–µ –ø–æ—á–∞—Ç–∏ —á–µ—Ä–µ–∑:",
        sec_suffix: "—Å",

        tasks_title: "–ó–∞–≤–¥–∞–Ω–Ω—è",
        task_subscribe_text: "–ü—ñ–¥–ø–∏—à–∏—Å—å –Ω–∞ –∫–∞–Ω–∞–ª +1‚≠ê",
        open: "–ü–µ—Ä–µ–π—Ç–∏",
        done: "–í–∏–∫–æ–Ω–∞–Ω–æ",
        task_75_text: "üéØ –î–æ—Å—è–≥–Ω–∏ —Ä–µ–∫–æ—Ä–¥—É 75 (+10‚≠ê)",
        check: "–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏",
        task_ad_minute_text: "üé¨ –ü–µ—Ä–µ–≥–ª—è–Ω—å —Ä–µ–∫–ª–∞–º—É +0.15‚≠ê <small>(—Ä–∞–∑ –Ω–∞ 1 —Ö–≤)</small>",
        watch: "–î–∏–≤–∏—Ç–∏—Å—å",
        next_available_in: "‚åõ –ù–∞—Å—Ç—É–ø–Ω–∏–π –ø–µ—Ä–µ–≥–ª—è–¥ –¥–æ—Å—Ç—É–ø–Ω–∏–π —á–µ—Ä–µ–∑:",
        wait: "–û—á—ñ–∫—É–π‚Ä¶",
        task_5ads_text: "üé¨ –ü–µ—Ä–µ–≥–ª—è–Ω—å 5 —Ä–µ–∫–ª–∞–º (+1‚≠ê)",
        task_5ads_available_in: "¬´5 —Ä–µ–∫–ª–∞–º¬ª –¥–æ—Å—Ç—É–ø–Ω–µ —á–µ—Ä–µ–∑:",
        task_10ads_text: "üé¨ –ü–µ—Ä–µ–≥–ª—è–Ω—å 10 —Ä–µ–∫–ª–∞–º (+2‚≠ê)",
        task_10ads_available_in: "¬´10 —Ä–µ–∫–ª–∞–º¬ª –¥–æ—Å—Ç—É–ø–Ω–µ —á–µ—Ä–µ–∑:",
        task_100games_text: "üéÆ –ó—ñ–≥—Ä–∞–π 100 —ñ–≥–æ—Ä (+10‚≠ê) ‚Äî –∑—ñ–≥—Ä–∞–Ω–æ: <b id='gamesPlayedCounter'>0</b>/100",

        b_tour_title: "‚öîÔ∏è –í–∏–∫–ª–∏–∫ —Å—É–ø–µ—Ä–Ω–∏–∫–∞",
        b_tour_sub: "–ó–≥–µ–Ω–µ—Ä—É–π —Ä–µ–∫–æ—Ä–¥, –∑—Ä–æ–±–∏ —Å—Ç–∞–≤–∫—É ‚≠ê —ñ –ø–æ–±–∏–π –π–æ–≥–æ –∑–∞ 3 –≥–æ–¥–∏–Ω–∏",
        opponent: "–°—É–ø–µ—Ä–Ω–∏–∫",
        generate: "–ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏",
        stake: "–°—Ç–∞–≤–∫–∞ ‚≠ê",
        start_challenge: "–ü–æ—á–∞—Ç–∏ –≤–∏–∫–ª–∏–∫ (3 –≥–æ–¥)",
        no_active_challenge: "–ù–µ–º–∞—î –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≤–∏–∫–ª–∏–∫—É.",
        time_left_prefix: "–ó–∞–ª–∏—à–∏–ª–æ—Å—å:",
        rule_goal: "üéØ –ú–µ—Ç–∞: –ø–æ–±–∏–π —Ä–µ–∫–æ—Ä–¥ –∑–∞ 3 –≥–æ–¥",
        rule_prize: "üíé –í–∏–≥—Ä–∞—à: √ó1.5 –≤—ñ–¥ —Å—Ç–∞–≤–∫–∏",
        rule_risk: "‚ö†Ô∏è –Ø–∫—â–æ –Ω–µ –≤—Å—Ç–∏–≥–∞—î—à ‚Äî —Å—Ç–∞–≤–∫–∞ –∑–≥–æ—Ä–∞—î",
        make_bet: "–ó—Ä–æ–±–∏—Ç–∏ —Å—Ç–∞–≤–∫—É",

        balance: "–ë–∞–ª–∞–Ω—Å",
        wallet: "–ì–∞–º–∞–Ω–µ—Ü—å",
        invite_friends: "–ó–∞–ø—Ä–æ—Å–∏ –¥—Ä—É–∑—ñ–≤",
        bot_link: "–ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –±–æ—Ç–∞:",
        open_bot: "‚û° –í—ñ–¥–∫—Ä–∏—Ç–∏ –±–æ—Ç–∞ @Stacktongame_bot",
        copy: "–°–∫–æ–ø—ñ—é–≤–∞—Ç–∏",
        one_link: "–¶–µ –æ–¥–Ω–∞ —Å–∏–ª–∫–∞ –¥–ª—è –≤—Å—ñ—Ö üëç",
        withdraw_title: "–í–∏–≤—ñ–¥ –∑—ñ—Ä–æ–∫",
        withdraw_hint: "–ó–∞ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è —Å–ø–∏—Å—É—î—Ç—å—Å—è —Ä—ñ–≤–Ω–æ 50‚≠ê, —Ä–µ—à—Ç–∞ –ª–∏—à–∞—î—Ç—å—Å—è. –î–∞–ª—ñ –≤—ñ–¥–∫—Ä–∏—î—Ç—å—Å—è –≥—Ä—É–ø–∞/¬´–ü–æ–¥—ñ–ª–∏—Ç–∏—Å—è¬ª –∑ –≥–æ—Ç–æ–≤–∏–º –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º —ñ –¥–≤–æ–º–∞ –∫–æ–¥–∞–º–∏.",
        withdraw_btn: "–í–∏–≤–µ—Å—Ç–∏",
        payout_list_title: "–°–ø–∏—Å–æ–∫ –≤–∏–≤–æ–¥—ñ–≤",
      },
      en: {
        instructions: "Click or Space ‚Äî drop the block. After game over, click/space to play again.",
        game_over: "Game Over",
        nice_try: "Nice try üëç",
        restart_hint: "Click or press Space to start again",
        start_btn: "‚ñ∂ Start",
        pause_before_new_game: "Pause before new game",
        you_can_start_in: "You can start in:",
        sec_suffix: "s",

        tasks_title: "Tasks",
        task_subscribe_text: "Subscribe to channel +1‚≠ê",
        open: "Open",
        done: "Done",
        task_75_text: "üéØ Reach 75 highscore (+10‚≠ê)",
        check: "Check",
        task_ad_minute_text: "üé¨ Watch an ad +0.15‚≠ê <small>(once per minute)</small>",
        watch: "Watch",
        next_available_in: "‚åõ Next available in:",
        wait: "Wait‚Ä¶",
        task_5ads_text: "üé¨ Watch 5 ads (+1‚≠ê)",
        task_5ads_available_in: "‚Äú5 ads‚Äù available in:",
        task_10ads_text: "üé¨ Watch 10 ads (+2‚≠ê)",
        task_10ads_available_in: "‚Äú10 ads‚Äù available in:",
        task_100games_text: "üéÆ Play 100 games (+10‚≠ê) ‚Äî played: <b id='gamesPlayedCounter'>0</b>/100",

        b_tour_title: "‚öîÔ∏è Challenge an opponent",
        b_tour_sub: "Generate a target, place a ‚≠ê bet and beat it within 3 hours",
        opponent: "Opponent",
        generate: "Generate",
        stake: "Stake ‚≠ê",
        start_challenge: "Start challenge (3h)",
        no_active_challenge: "No active challenge.",
        time_left_prefix: "Time left:",
        rule_goal: "üéØ Goal: beat the score in 3 hours",
        rule_prize: "üíé Prize: √ó1.5 of your stake",
        rule_risk: "‚ö†Ô∏è If you fail ‚Äî you lose the stake",
        make_bet: "Make a bet",

        balance: "Balance",
        wallet: "Wallet",
        invite_friends: "Invite friends",
        bot_link: "Bot link:",
        open_bot: "‚û° Open @Stacktongame_bot",
        copy: "Copy",
        one_link: "Same link for everyone üëç",
        withdraw_title: "Withdraw stars",
        withdraw_hint: "Clicking deducts exactly 50‚≠ê, the rest stays. You‚Äôll then open a group/Share with a ready message and two codes.",
        withdraw_btn: "Withdraw",
        payout_list_title: "Payouts",
      }
    };

    function applyLang(lang){
      // –∑–∞–º—ñ–Ω—é—î–º–æ –≤—Å—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ –∑ data-i18n
      document.querySelectorAll('[data-i18n]').forEach(el=>{
        const key = el.getAttribute('data-i18n');
        const dict = I18N[lang] || {};
        if (dict[key] != null){
          // —è–∫—â–æ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —î HTML (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ <small>), –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ innerHTML
          el.innerHTML = dict[key];
        }
      });

      // —Å–ø–µ—Ü-–≤–∏–ø–∞–¥–∫–∏: –∫–Ω–æ–ø–∫–∞ –ø—ñ–¥–ø–∏—Å–∫–∏, —è–∫—â–æ –≤–∂–µ –≤–∏–∫–æ–Ω–∞–Ω–æ ‚Äî —Å—Ç–∞–≤–∏–º–æ "Done"/"–í–∏–∫–æ–Ω–∞–Ω–æ"
      const subBtn = document.getElementById('subscribeBtn');
      if (subBtn){
        try{
          const subscribed = (localStorage.getItem("subscribed")==="true");
          if (subscribed){
            subBtn.textContent = lang==='en' ? I18N.en.done : I18N.uk.done;
            subBtn.classList.add('done');
          }else{
            subBtn.textContent = lang==='en' ? I18N.en.open : I18N.uk.open;
            subBtn.classList.remove('done');
          }
        }catch{}
      }

      // –æ–Ω–æ–≤–∏–º–æ –ø—ñ–¥–ø–∏—Å ‚Äú–ë–∞–ª–∞–Ω—Å‚Äù
      const balTitle = document.querySelector('#friends .balance [data-i18n="balance"]');
      if (balTitle){
        balTitle.textContent = lang==='en' ? I18N.en.balance : I18N.uk.balance;
      }

      // –ø—ñ–¥–ø–∏—Å —É —Ç—É—Ä–Ω—ñ—Ä–∞—Ö, —è–∫—â–æ –Ω–µ–º–∞—î –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≤–∏–∫–ª–∏–∫—É
      const info = document.getElementById('challengeInfo');
      if (info && (!info.textContent || info.textContent.trim()==='' || info.dataset.i18n)){
        // –∑–∞–ª–∏—à–∏–º–æ —è–∫ —É —Å–ª–æ–≤–Ω–∏–∫—É
      }

      // –ø—ñ–¥–ø–∏—à–µ–º–æ –∫–Ω–æ–ø–∫—É-–ø–µ—Ä–µ–º–∏–∫–∞—á
      const btn = document.getElementById('langToggle');
      if (btn) btn.textContent = (lang==='en' ? 'EN' : 'UA');

      // –∑–∞–ø–∞–º'—è—Ç–∞—Ç–∏
      localStorage.setItem('lang', lang);
      // –∞—Ç—Ä–∏–±—É—Ç lang –¥–ª—è html
      document.documentElement.setAttribute('lang', lang==='en'?'en':'uk');
    }

    // –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –º–æ–≤–∏ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
    (function(){
      const saved = localStorage.getItem('lang') || 'uk';
      applyLang(saved);

      const toggle = document.getElementById('langToggle');
      toggle?.addEventListener('click', ()=>{
        const cur = localStorage.getItem('lang') || 'uk';
        const next = (cur==='uk') ? 'en' : 'uk';
        applyLang(next);
      });
    })();
  </script>

  <!-- –û—Å–Ω–æ–≤–Ω–∞ –ª–æ–≥—ñ–∫–∞ –≥—Ä–∏/–∑–∞–≤–¥–∞–Ω—å -->
  <script src="./script.js"></script>
</body>
</html>
